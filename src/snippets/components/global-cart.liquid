<div id="cart" class="global-cart" :class="{active: cartIsOpen}" data-free-ship-threshold="{{ settings.free_shipping | json }}" v-cloak>
  <div class="global-cart__overlay bg--black--80" @click="toggleCart"></div>
  <div class="global-cart__drawer section-2">
    <div class="">
      <h3 class="h3 font-sans text-center">
        My Cart
      </h3>
      <div style="z-index:999999;" class="clickable--icon close" @click="toggleCart">
        {% render 'x' %}
      </div>
    </div>
    <div class="global-cart__drawer__error-bar row row--align-center row--justify-center" :class="{active: cartError}">
      <span class="error type--p color--error">${ cartError }</span>
    </div>
    <ul class="list list--no-style global-cart__drawer__item-list row row--direction-column row--no-wrap row--no-padding">
      <line-item inline-template
      v-for="item in cartData.items"
      v-if="item.quantity > 0"
      :key="item.key"
      :item="item"
      :loading="loadingIds.includes(item.variant_id)"
      v-on:change-line="changeCart">
        <li class="item d-flex align-items-center justify-content-between position-relative" :class="{loading: loading}">
          <div class="item__image-wrap">
            <a v-if="item.image" :href="item.url">
              <img :src="thumbnailImg" :alt="item.product_title">
            </a>
          </div>

          <div class="wl-item-info">
            <div class="top d-flex justify-content-between align-items-center">
              <a class="p1 color-black font-sans d-block item-title" :href="item.url">${ item.product_title }</a>
              <div class="p1 color-black font-sans d-block item-price" v-if="item.total_discount > 0">$${ origPrice }</div>
              <div class="p1 color-black font-sans d-block item-price" :class="{ 'color--error': item.total_discount > 0 }">$${ price }</div>
            </div>
            <span v-for="option in item.options_with_values" class="p1 font-sans">${option.name}: ${option.value}</span>
            <div class="bottom">
              <div class="qty-adjust-wrap">
                <div class="quantity font-sans">
                  <button class="dec" @click="changeLine(item.quantity - 1)">
                    -
                  </button>
                  <span class="qty">${ item.quantity }</span>
                  <button class="inc" @click="changeLine(item.quantity + 1)">
                    +
                  </button>
                  </div>
              </div>
              <div class="position-absolute empty" @click="changeLine(0)">{% render 'empty' %}</div>
            </div>
          </div>

        </li>
      </line-item>
      <div class="type--p empty-msg h5 font-sans" v-if="cartData.item_count === 0">How Sad! Your bag is currently empty.</div>
    </ul>
    <div class="global-cart__drawer__footer d-flex flex-wrap flex-column w-100 section-2">
      {% comment %} <span class="shipping-msg type--s">Youâ€™re $${fromFreeShip} away from free shipping!</span> {% endcomment %}
      <h5 class="h5 font-sans color-black font-bold"> Subtotal $${total}</h5>
      <p class="p2 font-sans text-center shipping-msg">Shipping & Taxes Calculated at Checkout</p>
      <a v-if="cartData.items && cartData.items.length > 0" class="cta checkout-link clickable--contained clickable--contained--primary width--100 hero-button color-white bg-black button-big button-1 d-flex justify-content-center flex-column align-items-center font-sans" :href="checkoutUrl">
        Checkout
      </a>
      <a v-else class="checkout-link clickable--contained clickable--contained--primary width--100">
        Empty Bag
      </a>
    </div>
  </div>
</div>