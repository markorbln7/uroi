<section class="grid">
    <div class="container">
        <div class="grid__heading-main">
            <h2>All Products</h2>
        </div>
        <div class="grid__wrap">
                    {% assign colHandle = collection.handle%}
                    {% for product in collections[colHandle].products %}
                    {% assign type = '' %}
                    {% for collection in product.collections %}	
                        {% assign type = type | append: ',' | append: collection.handle %}
                        {% if type contains 'best-seller' %}
                            {% assign bs = 'true' %}
                        {% else %}
                            {% assign bs = 'false' %}
                        {% endif %}
                    {% endfor %}
                    {% assign types = type | remove_first: "," %}
                        <div class="grid__card" 
                        data-type="{{types}}"
                        data-best-sellers="{{bs}}"
                        data-rating={{product.metafields.yotpo.reviews_average}}>
                            <div class="grid__content">
                                <div class="grid__link">
                                    <div class="grid__img-box">
                                        <picture class="grid__img">
                                            <source media="(max-width: 600px)" srcset="{{ product.featured_image | img_url: 'master' }}">
                                            <source media="(max-width: 1200px)" srcset="{{ product.featured_image | img_url: 'master' }}">
                                            <img src="{{ product.featured_image | img_url: 'master' }}" alt="{{ product.title }}">
                                        </picture>
                                    </div>
                                    {% assign mark = product.metafields.yotpo.reviews_average | plus: 0 %}
                                    <div class="grid__hover-info">
                                        <a class="grid__overlay-link" href="{{ product.url }}"></a>
                                        <div class="grid__rating">
                                            <div class="grid__star">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.09 14.45"
                                                    class="grid__svg-star">
                                                    <path
                                                        d="M8,12,4.18,14a.5.5,0,0,1-.67-.21.49.49,0,0,1,0-.31l.7-4.24-3.06-3a.5.5,0,0,1,0-.71.47.47,0,0,1,.28-.14l4.25-.64L7.55.89A.51.51,0,0,1,8.22.67a.54.54,0,0,1,.23.22l1.92,3.85,4.25.64A.5.5,0,0,1,15,6a.62.62,0,0,1-.14.28l-3.06,3,.7,4.24a.5.5,0,0,1-.41.57.47.47,0,0,1-.31-.05Z"
                                                        class="star"></path>
                                                </svg>
                                            </div>
                                            <div class="grid__star">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.09 14.45"
                                                    class="grid__svg-star">
                                                    <path
                                                        d="M8,12,4.18,14a.5.5,0,0,1-.67-.21.49.49,0,0,1,0-.31l.7-4.24-3.06-3a.5.5,0,0,1,0-.71.47.47,0,0,1,.28-.14l4.25-.64L7.55.89A.51.51,0,0,1,8.22.67a.54.54,0,0,1,.23.22l1.92,3.85,4.25.64A.5.5,0,0,1,15,6a.62.62,0,0,1-.14.28l-3.06,3,.7,4.24a.5.5,0,0,1-.41.57.47.47,0,0,1-.31-.05Z"
                                                        class="star"></path>
                                                </svg>
                                            </div>
                                            <div class="grid__star">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.09 14.45"
                                                    class="grid__svg-star">
                                                    <path
                                                        d="M8,12,4.18,14a.5.5,0,0,1-.67-.21.49.49,0,0,1,0-.31l.7-4.24-3.06-3a.5.5,0,0,1,0-.71.47.47,0,0,1,.28-.14l4.25-.64L7.55.89A.51.51,0,0,1,8.22.67a.54.54,0,0,1,.23.22l1.92,3.85,4.25.64A.5.5,0,0,1,15,6a.62.62,0,0,1-.14.28l-3.06,3,.7,4.24a.5.5,0,0,1-.41.57.47.47,0,0,1-.31-.05Z"
                                                        class="star"></path>
                                                </svg>
                                            </div>
                                            <div class="grid__star">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.09 14.45"
                                                    class="grid__svg-star">
                                                    <path
                                                        d="M8,12,4.18,14a.5.5,0,0,1-.67-.21.49.49,0,0,1,0-.31l.7-4.24-3.06-3a.5.5,0,0,1,0-.71.47.47,0,0,1,.28-.14l4.25-.64L7.55.89A.51.51,0,0,1,8.22.67a.54.54,0,0,1,.23.22l1.92,3.85,4.25.64A.5.5,0,0,1,15,6a.62.62,0,0,1-.14.28l-3.06,3,.7,4.24a.5.5,0,0,1-.41.57.47.47,0,0,1-.31-.05Z"
                                                        class="star"></path>
                                                </svg>
                                            </div>
                                            {% if mark > 4.49 %}
                                            <div class="grid__star">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.09 14.45"
                                                    class="grid__svg-star">
                                                    <defs>
                                                        <clipPath id="rect16284126205765">
                                                            <path
                                                                d="M8,12,4.18,14a.5.5,0,0,1-.67-.21.49.49,0,0,1,0-.31l.7-4.24-3.06-3a.5.5,0,0,1,0-.71.47.47,0,0,1,.28-.14l4.25-.64L7.55.89A.51.51,0,0,1,8.22.67a.54.54,0,0,1,.23.22l1.92,3.85,4.25.64A.5.5,0,0,1,15,6a.62.62,0,0,1-.14.28l-3.06,3,.7,4.24a.5.5,0,0,1-.41.57.47.47,0,0,1-.31-.05Z"
                                                                class="mask"></path>
                                                        </clipPath>
                                                    </defs>
                                                    <rect clip-path="url(#rect16284126205765)" width="4.5269999999999975" x="0.5"
                                                        y="0" height="14.15" fill="#000"></rect>
                                                    <path
                                                        d="M8,12,4.18,14a.5.5,0,0,1-.67-.21.49.49,0,0,1,0-.31l.7-4.24-3.06-3a.5.5,0,0,1,0-.71.47.47,0,0,1,.28-.14l4.25-.64L7.55.89A.51.51,0,0,1,8.22.67a.54.54,0,0,1,.23.22l1.92,3.85,4.25.64A.5.5,0,0,1,15,6a.62.62,0,0,1-.14.28l-3.06,3,.7,4.24a.5.5,0,0,1-.41.57.47.47,0,0,1-.31-.05Z"
                                                        class="star"></path>
                                                </svg>
                                            </div>
                                            {% else %}
                                            
                                            {% endif %}
                                        </div>
                                        <div class="grid__price">
                                            {{ product.price | money }}
                                        </div>
                                        <button class="atc-button add-to-cart grid__cart" data-quantity="1" data-variant-id="{{product.first_available_variant.id}}">Add To Cart</button>
                                    </div>
                                </div>
                            </div>
                            <div class="grid__heading">
                                <a href="{{ product.url }}" data-mh="title-5">{{ product.title }}</a>
                            </div>
                            <p class="grid__subtitle">{{product.metafields.product.subtext}}</p>
                        </div>
                    {% endfor %}
        </div>
    </div>
</section>